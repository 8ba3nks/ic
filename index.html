<!DOCTYPE html>
<html>
<head>
    <title>Smart Word → Image Display</title>
    <style>
        #output img {
            width: 80px;
            height: 80px;
            margin-right: 5px;
            object-fit: contain;
        }
    </style>
</head>
<body>

<h2>Smart Word → Image Display (PNG from /ic/ Directory)</h2>

<input type="text" id="inputText" placeholder="Example: american, a-'ng-a, ba-ng'bi" size="40">
<button onclick="displayImages()">Show</button>

<div id="output"></div>

<script>
// Priority syllables (expand as needed)
const PRIORITY = [
    "me","ri","ca","ba","bi","bu","be","bo",
    "ka","ki","ku","ke","ko",
    "ng"
];

const VOWELS = ["a", "i", "u", "e", "o"];

// Special characters
const SPECIAL = ["-", "'", "`"];

// Smart syllable parser
function smartSplit(text) {
    text = text.toLowerCase().replace(/\./g, "");
    let result = [];
    let i = 0;

    while (i < text.length) {

        // Special characters
        if (SPECIAL.includes(text[i])) {
            result.push(text[i]);
            i++;
            continue;
        }

        // Priority syllables (ng, me, ri, etc.)
        let chunk = null;
        for (let p of PRIORITY.sort((a,b)=>b.length-a.length)) {
            if (text.startsWith(p, i)) {
                chunk = p;
                break;
            }
        }

        if (chunk) {
            result.push(chunk);
            i += chunk.length;
            continue;
        }

        // CV rule
        if (i+1 < text.length &&
            !VOWELS.includes(text[i]) &&
            VOWELS.includes(text[i+1])) {

            result.push(text[i] + text[i+1]);
            i += 2;
            continue;
        }

        // Single fallback
        result.push(text[i]);
        i++;
    }

    return result;
}

// Display images
function displayImages() {
    const raw = document.getElementById("inputText").value.trim();

    let parts = raw.includes(".") ? raw.split(".") : smartSplit(raw);

    const container = document.getElementById("output");
    container.innerHTML = "";

    parts.forEach(p => {
        if (!p) return;

        const img = document.createElement("img");

        // CHANGED: now loads from /ic/
        img.src = "/ic/" + p + ".png";
        img.alt = p;

        container.appendChild(img);
    });
}
</script>

</body>
</html>
